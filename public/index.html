<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>ãƒ•ã‚©ãƒ“ã‚¢ãƒ»ãƒ‘ãƒ¼ãƒ†ã‚£ - ãƒãƒ£ãƒƒãƒˆã‚¹ãƒˆãƒ¼ãƒªãƒ¼</title>
  <style>

@media (max-aspect-ratio: 9/16) {
  #chat {
    max-height: 80vh;
  }

  #titleScreen {
    padding: 20px;
    justify-content: flex-start;
  }
}


    body {
      margin: 0;
      background: url('bg.jpg') no-repeat center center / cover;
      font-family: "Helvetica Neue", sans-serif;
    }

    #titleScreen {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #titleScreen h1 {
      font-size: 32px;
      margin-bottom: 20px;
    }

    #titleScreen button {
      margin: 10px;
      padding: 12px 24px;
      font-size: 18px;
      border-radius: 25px;
      border: none;
      background-color: #128C7E;
      color: white;
      cursor: pointer;
    }

#chat {
  max-width: 480px;
  width: 100%;
  margin: 0 auto;
  padding: 10px;
  padding-bottom: 20vh;
  background-color: rgba(245, 245, 245, 0.2);
  backdrop-filter: blur(4px);
  max-height: 90vh; /* â† é«˜ã•ã®ä¸Šé™ã‚’è¿½åŠ  */
  height: calc(100vh - 80px);
  overflow-y: auto;
  display: none;
  flex-direction: column;
  border-radius: 12px;
}


    .msg {
      max-width: 80%;
      margin: 6px;
      padding: 10px;
      border-radius: 18px;
      line-height: 1.4;
      word-wrap: break-word;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .left {
      align-self: flex-start;
      background-color: white;
      border-bottom-left-radius: 0;
    }

    .right {
      align-self: flex-end;
      background-color: #dcf8c6;
      border-bottom-right-radius: 0;
      flex-direction: row-reverse;
    }

    .icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
    }

    .name {
      font-size: 12px;
      margin: 4px;
      color: #666;
    }

#controls {
  display: none; /* â† åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤ºã« */
  /* ä»¥ä¸‹ã¯ãã®ã¾ã¾ */
  position: fixed;
  bottom: 8vh;
  left: 50%;
  transform: translateX(-50%);
  flex-direction: row;
  flex-wrap: nowrap;
  gap: 10px;
  z-index: 1000;
  max-width: 100%;
  padding: 0 10px;
  box-sizing: border-box;
}

#controls button {
  background-color: #128C7E;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 16px;
  cursor: pointer;
  white-space: nowrap; /* â† ãƒ†ã‚­ã‚¹ãƒˆæŠ˜ã‚Šè¿”ã—é˜²æ­¢ */
  min-width: 80px;     /* â† ãƒœã‚¿ãƒ³å¹…ã®ç¢ºä¿ï¼ˆå¥½ã¿ã«å¿œã˜ã¦èª¿æ•´ï¼‰ */
  flex-shrink: 0;      /* â† ç¸®å°ã—ãªã„ã‚ˆã†ã«å›ºå®š */
}


    #gameOverScreen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      font-size: 24px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #gameOverScreen button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 20px;
      background: #128C7E;
      color: white;
      cursor: pointer;
    }

    #imageModal {
      display: none;
      position: fixed;
      z-index: 99999;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.3);
      justify-content: center;
      align-items: center;
    }

    #imageModal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
      box-shadow: 0 0 20px #000;
      transition: transform 0.3s ease;
    }

    #imageModal:active img {
      transform: scale(1.01);
    }
#bgVideo {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: -1;
  opacity: 0.9; /* â† é€æ˜åº¦ã‚‚èª¿æ•´å¯ï¼ˆãŠå¥½ã¿ã§ï¼‰ */
  pointer-events: none; /* â† èƒŒæ™¯å‹•ç”»ã«ãƒã‚¦ã‚¹ãŒåå¿œã—ãªã„ã‚ˆã†ã«ã™ã‚‹ */
}

#controls button,
#titleScreen button,
#gameOverScreen button {
  background-color: rgba(18, 140, 126, 0.2); /* åŠé€æ˜ */
  backdrop-filter: blur(6px); /* èƒŒæ™¯ã¼ã‹ã— */
  color: #eee; /* è–„ã„æ–‡å­—è‰² */
  border: 1px solid rgba(255, 255, 255, 0.2);
  font-weight: bold;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
  transition: all 0.3s ease;
}

#controls button:hover,
#titleScreen button:hover,
#gameOverScreen button:hover {
  background-color: rgba(30, 160, 140, 0.3);
  box-shadow: 0 0 12px rgba(0, 255, 255, 0.4);
  transform: translateY(-2px);
}

#controls button:active,
#titleScreen button:active,
#gameOverScreen button:active {
  transform: scale(0.96);
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.3);
}


button {
  position: relative;
  overflow: hidden;
}

button::after {
  content: "";
  position: absolute;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 50%;
  transform: scale(0);
  animation: ripple 0.6s linear;
  pointer-events: none;
}

@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

.choice-glow {
  animation: glow 1s ease-in-out infinite alternate;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
}

@keyframes glow {
  from {
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
  }
  to {
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.9);
  }
}


  </style>
</head>
<body>

<video id="bgVideo" autoplay muted loop playsinline>
  <source src="t.mp4" type="video/mp4">
  ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
</video>


<div id="imageModal" onclick="closeImageModal()">
  <div style="text-align: center;">
    <img id="modalImg" src="" alt="æ‹¡å¤§ç”»åƒ">
    <div id="modalCaption" style="color: #fff; margin-top: 12px; font-size: 14px;"></div>
  </div>
</div>


  <div id="titleScreen">
    <button onclick="startNew()">â–¶ æœ€åˆã‹ã‚‰</button>
  </div>



  <div id="chat"></div>

  <div id="controls">
    <button id="nextBtn">â–¶ æ¬¡ã¸</button>
    <button id="saveBtn">ğŸ’¾ ä¿å­˜</button>
    <button id="loadBtn">ğŸ“‚ èª­è¾¼</button>
  </div>

  <div id="gameOverScreen">
    <p>ğŸ’€ ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</p>
    <button onclick="returnToTitle()">ã‚¿ã‚¤ãƒˆãƒ«ã¸æˆ»ã‚‹</button>
  </div>

  <div id="imageModal" onclick="closeImageModal()">
    <img id="modalImg" src="" alt="æ‹¡å¤§ç”»åƒ">
  </div>

  <audio id="se" src="click.mp3" preload="auto"></audio>

  <script>

const characterInfo = {
  "ãƒªã‚¯": { img: "ri.png", desc: "å½¼å¥³æŒã¡ã€‚å„ªæŸ”ä¸æ–­ãªæµ®æ°—ç”·ã€‚" },
  "ãƒŠãƒŠãƒŸ": { img: "na.png", desc: "ã‚„ã‚„ä¾å­˜æ°—å‘³ã€‚ãƒªã‚¯ãŒå¥½ãã™ãã¦æ€–ã„ã€‚ " },
  "ãƒŸã‚µ": { img: "mi.png", desc: "è»½ã„ãƒãƒªã§ãƒªã‚¯ã¨éŠã‚“ã§ã„ãŸãŒã€ç§˜å¯†ä¸»ç¾©ã€‚" },
  "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼": { img: "story.png", desc: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼" },
  "ç·‘å‚": { img: "midori.png", desc: "æš—é—‡ãŒè‹¦æ‰‹ã€‚å¸¸ã«ãƒ©ã‚¤ãƒˆã‚’æŒã¡æ­©ã„ã¦ã„ã‚‹ã€‚" },
  "ç´«æ©‹": { img: "murasaki.png", desc: "è¡€ã‚’è¦‹ã‚‹ã®ãŒè‹¦æ‰‹ã€‚é£Ÿäº‹ã®å ´é¢ã§ã¯éœ‡ãˆã¦ã—ã¾ã†ã€‚" },
  "é’åœŸ": { img: "ao.png", desc: "æ€–ãŒã‚Šã§å¸¸ã«æ€¯ãˆã¦ã„ã‚‹ãŒã€æœ¬å½“ã¯å„ªã—ã„å¿ƒã®æŒã¡ä¸»ã€‚" },
  "ç°é‡": { img: "hai.png", desc: "é¡ãŒæ€–ã„ã€‚ä½•ã‹ãŒæ˜ ã‚‹ã“ã¨ã‚’æã‚Œã¦ã„ã‚‹ã€‚" },
  "ã‚ãªãŸ": { img: "you.png", desc: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è‡ªèº«ã€‚ææ€–ã®çœŸç›¸ã‚’è¿½ã†å‹‡æ•¢ãªå­˜åœ¨ã€‚" },
  "ç™½é³¥": { img: "shiratori.png", desc: "åšå£«ã®æœ¬åã€‚ä½•ã‹è£ãŒã‚ã‚‹ã‚ˆã†ã ã€‚" }
};



    const chat = document.getElementById("chat");
    const nextBtn = document.getElementById("nextBtn");
    const controls = document.getElementById("controls");
    const se = document.getElementById("se");
    const gameOverScreen = document.getElementById("gameOverScreen");
    const titleScreen = document.getElementById("titleScreen");

const story = [
  {
    type: "msg",
    name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼",
    side: "left",
    icon: "story.png",
    text: "2025å¹´7æœˆã€‚æ­£ä½“ä¸æ˜ã®å¥‡ç—…ã€ãƒ•ã‚£ãƒ­ãƒãƒ‹ã‚¢ã€ãŒã€è‹¥è€…ãŸã¡ã®é–“ã§éƒ½å¸‚ä¼èª¬çš„ã«æµè¡Œã£ã¦ã„ãŸã€‚ãã‚Œã¯â€”â€”ã€Œæ„›ãŒå¼·ã™ãã‚‹ã‚ã¾ã‚Šã€ç›¸æ‰‹ã‚’ç›£è¦–ã›ãšã«ã¯ã„ã‚‰ã‚Œãªããªã‚‹ç—…ã€ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚æœ€åˆã¯ã€SNSã§æ‹¡æ•£ã•ã‚ŒãŸâ€œãŸã ã®å™‚â€ã«ã™ããªã‹ã£ãŸã€‚ã€Œæ‹äººã«GPSã‚’ä»•æ›ã‘ã‚‰ã‚ŒãŸã€ã€Œå‹é”ã«ç›—æ’®ã•ã‚ŒãŸã€ã„ã¤ã®é–“ã«ã‹ã€ãã‚Œã‚‰ã®éå‰°ãªæ„›ç€è¡å‹•ã‚’ã€Œã‚®ãƒªã‚·ãƒ£èªç”±æ¥ã§ã€Œæ„›ã™ã‚‹ãƒ»å¥½ã‚€ã€ã‚’æ„å‘³ã™ã‚‹å˜èªã€Philo-ï¼ˆãƒ•ã‚£ãƒ­ï¼‰ã«ã€Œç•°å¸¸ãªç†±ä¸­ãƒ»åŸ·ç€ã€ã‚’æ„å‘³ã™ã‚‹ã€maniaï¼ˆãƒãƒ‹ã‚¢ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã¦ã€Œãƒ•ã‚£ãƒ­ãƒãƒ‹ã‚¢ã€ã¨å‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ãƒ•ã‚£ãƒ­ãƒãƒ‹ã‚¢ã¯æœ¬å½“ã«å­˜åœ¨ã™ã‚‹ç—…ãªã®ã‹ï¼Ÿãã‚Œã¨ã‚‚ã€èª°ã‹ãŒä»•çµ„ã‚“ã â€œç‹‚æ°—â€ã®é€£é–ãªã®ã‹ã€‚æœãŸã—ã¦ãƒ»ãƒ»ãƒ»ãƒ»" },
  {
    type: "msg",
    name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼",
    side: "left",
    icon: "story.png",
    text: "7æœˆ5æ—¥ã€‚ã‚ãªãŸã¯ã€å¹¼ã„é ƒã‹ã‚‰ã®å¹¼é¦´æŸ“ãƒ»ãƒŠãƒŠãƒŸã¨ä»˜ãåˆã£ã¦ã„ã‚‹æ™®é€šã®é«˜æ ¡ç”Ÿã€‚ã ã‘ã©â€”â€”ãã®è£ã§ã€ã‚‚ã†ä¸€äººã®å¹¼é¦´æŸ“ãƒ»ãƒŸã‚µã¨ç§˜å¯†ã®é–¢ä¿‚ã‚’ç¶šã‘ã¦ã„ã‚‹ã€‚3äººã ã‘ã®ãƒ©ã‚¤ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã€‚ã„ã¤ã‚‚é€šã‚Šã®ã€ä»–æ„›ãªã„ã‚„ã‚Šå–ã‚Šã€‚â€¦â€¦ã®ã¯ãšã ã£ãŸã€‚ã ãŒã€ã‚ã‚‹è©±é¡Œã‚’ãã£ã‹ã‘ã«ã€æ—¥å¸¸ã¯å´©ã‚Œå§‹ã‚ã‚‹ã€‚æµ®æ°—ã‚’éš ã—é€šã™ã‹ï¼Ÿã€€çœŸå®Ÿã‚’æ˜ã‹ã™ã‹ï¼Ÿäº¤å·®ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€æºã‚Œã‚‹å¿ƒã€æš´ã‹ã‚Œã¦ã„ãã€Œè¨˜æ†¶ã€ã¨ã€Œå˜˜ã€ã€‚çœŸç›¸ã«ãŸã©ã‚Šç€ãéµã¯ã€ãƒãƒ£ãƒƒãƒˆã®ä¸­ã«ã™ã¹ã¦ã‚ã‚‹ã€‚é–“é•ã£ãŸé¸æŠã¯ã€æ‹ã‚‚å‹æƒ…ã‚‚å´©å£Šã•ã›ã‚‹ã€‚ã‚ãªãŸã®â€œé¸æŠâ€ãŒã€ã“ã®ç‰©èªã®çµæœ«ã‚’æ±ºã‚ã‚‹â€”â€”"
  },
  {
        type: "choice",
        choices: [
          { text: "ç‰©èªã‚’é€²ã‚ã‚‹ã€‚", next: "deny", correct: true },
        ]
      },
      { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ä»Šæ—¥ã‚ã£ã¡ã‚ƒæš‘ã‹ã£ãŸã­ï½â˜€ï¸å­¦æ ¡è¡Œãã ã‘ã§æ±—ã ãã ã£ãŸğŸ’¦" },
      { id: "deny", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ã„ã‚„ã»ã‚“ã¨ãã‚Œï¼é§…ã¾ã§æ­©ã„ã¦ã‚‹ã ã‘ã§Tã‚·ãƒ£ãƒ„2æšç›®ã„ããã†ã ã£ï¼ˆç¬‘ï¼‰" },
      { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "2æšç›®ï½—ï½—ã©ã‚“ãªç™ºæ±—é‡ã ã‚ˆãƒŸã‚µğŸ˜‚" },
  { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã­ãˆã€ãƒªã‚¯ãã‚“ã£ã¦ã€å¤æ´¾ï¼Ÿå†¬æ´¾ï¼ŸğŸ‘€" },
          { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ã‚“ï½ã€ç§‹ã‹ãªï¼Ÿï¼ˆç¬‘ï¼‰å¤ã¯æ±—ã‹ãã—ã€å†¬ã¯å¸ƒå›£ã‹ã‚‰å‡ºã‚Œã‚“ã—â€¦" },
   { id: "deny", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "å„ªæŸ”ä¸æ–­ï½—ã•ã™ãŒãƒªã‚¯ã£ã¦æ„Ÿã˜ğŸ¤£" },
            { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãŠã„ãŠã„ã€è¤’ã‚ã¦ã‚“ã®ã‹ï¼Ÿãã‚Œï½—" },
    { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã§ã‚‚ãã†ã„ã†ã¨ã“å¥½ãã ã‘ã©ã­â˜ºï¸" },
     { id: "deny", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "å‡ºãŸå‡ºãŸï½ãƒŠãƒŠãƒŸã®æƒšæ°—ã‚¿ã‚¤ãƒ ï½—" },
        { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãµãµãµï½ğŸ’•" },
           { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ã„ã‚„ã€ç…§ã‚Œã‚‹ã‹ã‚‰ã‚„ã‚ã¦ãã‚ŒğŸ’¦" },
    { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã‚ã€ãã†ã„ãˆã°ãƒªã‚¯ã£ã¦ã“ã®å‰ã€è¥¿é§…ã®æ–¹ã«ã„ãŸï¼Ÿé§…å‰ã®ã‚«ãƒ•ã‚§ã§è¦‹ãŸã£ã¦å‹ã ã¡ãŒè¨€ã£ã¦ãŸï½" },
            { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãˆï¼Ÿã‚ãƒ¼â€¦â€¦ãã€ãã†ã ã­ã€‚ã©ã†ã‹ãªã€è¦šãˆã¦ãªã„ãªã‚ãƒ»ãƒ»ãƒ»" },
     { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãªã‚‹ã»ã©ã­ï½ã§ã‚‚ã•ã€è¥¿é§…ã£ã¦ã€ãŸã—ã‹ãƒ»ãƒ»ãƒ»ãƒŸã‚µã®å®¶ã®è¿‘ãã ã‚ˆã­ï¼Ÿ" },
     { id: "deny", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ãƒ»ãƒ»ãƒ»ãã†ã ã­ã€‚" },
     { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã‚‚ã—ã‹ã—ã¦ã€ãƒŸã‚µã®å®¶ã«ç”¨äº‹ã‚ã£ãŸã®ï¼Ÿ" },
           { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ã¡ã‚‡ã£ã¨ã ã‘ã€å¯„ã£ãŸã‚ˆã†ãªæ°—ãŒã™ã‚‹ã‘ã©ãƒ»ãƒ»ãƒ»" },
        { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãˆï½ç§ã€ãƒŸã‚µã®å®¶ã«è¡Œã£ãŸã“ã¨ãªã„ã‹ã‚‰ã€è¡ŒããŸã‹ã£ãŸãªï½ã€‚ã§ã‚‚ã€ãã®â€œã¡ã‚‡ã£ã¨â€ã£ã¦â€¦â€¦ä½•åˆ†ãã‚‰ã„ï¼Ÿ" },
          { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»" },
 { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "â”€â”€ã¦ã„ã†ã‹ã­ã€ãƒªã‚¯ãã‚“ã€‚ã“ã‚Œè¦‹ã¦ãã‚Œãªã„ï¼Ÿ" },
      { id: "deny", type: "image", src: "keitai.jpg", caption: "ãƒ™ãƒƒãƒ‰ã®ä¸Šã®ã‚¹ãƒãƒ›ï¼šæ’®å½±æ—¥æ™‚ã€€2025å¹´6æœˆ30æ—¥AM2æ™‚", side: "left", icon: "na.png", name: "ãƒŠãƒŠãƒŸ" },
         { id: "deny", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â€¦â€¦ãˆï¼Ÿ" },
  { id: "deny", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "â€¦â€¦ã¯ï¼Ÿã“ã‚Œâ€¦â€¦ã‚¦ãƒã˜ã‚ƒã‚“ã€‚" },
 { id: "deny", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "â”€ãƒ¼ã“ã‚Œã£ã¦ã€ãƒªã‚¯ãã‚“ã®ã‚¹ãƒãƒ›ã ã‚ˆã­ï¼Ÿã­ãˆã€ç­”ãˆã¦ã€ã“ã®å†™çœŸã¯ã€ä½•ï¼Ÿ" },

      {
        type: "choice",
        choices: [
          { text: "â€¦â€¦ã”ã‚ã‚“ã€‚ãƒŸã‚µã®éƒ¨å±‹ã€å…¥ã£ãŸã‚ˆã€‚ã§ã‚‚ã€ã™ãã«å¸°ã£ãŸã‚ˆã€‚", next: "study", correct: true },
          { text: "ã‚ã€ã“ã®å†™çœŸâ€¦â€¦æ˜”ã€å‹é”ã¨ä¸€ç·’ã«ãƒŸã‚µã®å®¶ã§éŠã‚“ã æ™‚ã«æ’®ã£ãŸã‚„ã¤ã ã­ã€‚", next: "kitchen", correct: false ,wrongMsg: "æ’®å½±æ—¥æ™‚ã‹ã‚‰ã€ã‹ãªã‚Šä¸ä¿¡æ„Ÿã‚’ä¸ãˆã‚‹è¿”ç­”ã§ã‚ã‚‹ã€‚" }
        ]
      },
    { id: "study", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãµãƒ¼ã‚“ã€ãã†ãªã‚“ã ã€‚â”€â”€ã˜ã‚ƒã‚ã€ã“ã‚Œã¯ï¼Ÿ" },
        { id: "study", type: "image", src: "T.jpg", caption: "Tã‚·ãƒ£ãƒ„ï¼šæ’®å½±æ—¥æ™‚ã€€2025å¹´6æœˆ30æ—¥AM3æ™‚", side: "left", icon: "na.png", name: "ãƒŠãƒŠãƒŸ" },
   { id: "study", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã“ã®Tã‚·ãƒ£ãƒ„ã€ãƒªã‚¯ãã‚“ã®ã˜ã‚ƒãªã„ï¼Ÿ" },
    { id: "study", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ã‚ã€ã¡ã‚‡ã£ã¨å¾…ã£ã¦ãã‚Œâ€¦â€¦" },

        {
        type: "choice",
        choices: [
          { text: "â€¦â€¦ä¿ºã®ã˜ã‚ƒãªã„ã‚ˆã€‚ä¼¼ã¦ã„ã‚‹ã ã‘ã˜ã‚ƒãªã„ã‹ãªï¼Ÿ", next: "3", correct: true },
          { text: "ãˆï¼Ÿã‚ã€ãã‚Œã€ãŸã¾ãŸã¾å¿˜ã‚ŒãŸã ã‘ã€‚ãã®æ—¥ã¯ã€å¤œã€ã™ãã«å¸°ã£ãŸã—ãƒ»ãƒ»ãƒ»", next: "kitchen", correct: false ,wrongMsg: "æ’®å½±æ—¥æ™‚ãŒï¼’æ™‚ã«ãªã£ã¦ã„ã¦ã€ã™ãã«å¸°ã£ãŸã€ã¨ã„ã†ç†ç”±ã§ã¯ä¸ä¿¡æ„Ÿã‚’ä¸ãˆã‚‹ã€‚" }
        ]
      },
    { id: "3", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ãã†ã ã‚ˆã€ã“ã‚Œã€ãŠå…„ã¡ã‚ƒã‚“ã®ã ã‹ã‚‰ï¼ã“ã®æ—¥ã¯ã€ãƒªã‚¯å›ãŒæ¥ã¦ã€ã‚¹ãƒãƒ›ã‚’å¿˜ã‚Œã¡ã‚ƒã£ã¦ã€ãŸã ãã‚Œã ã‘ã ã‚ˆï¼" },
  { id: "3", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãµãƒ¼ã‚“ã€‚ãã†ãªã‚“ã ãƒ»ãƒ»ãƒ»ãã†ã ã¨æ€ã£ãŸï¼ã”ã‚ã‚“ã­ã€å¤‰ãªã“ã¨èã„ã¡ã‚ƒã£ã¦ï¼" },
         { id: "3", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ã§ã‚‚ã€ãªã‚“ã§ã“ã‚“ãªå†™çœŸã€ãƒŠãƒŠãƒŸãŒæŒã£ã¦ã‚‹ã‚“ã ï¼Ÿ" },
  { id: "3", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã­ãˆã€ãƒªã‚¯ãã‚“ã€ãƒŸã‚µã¡ã‚ƒã‚“â”€â”€ã¡ã‚‡ã£ã¨ã€ã“ã‚Œè¦‹ã¦ã‚‚ã‚‰ã£ã¦ã„ã„ï¼Ÿ" },
     { id: "3", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ãƒŠãƒŠãƒŸã‹ã‚‰ã‚ã‚‹HPã®URLãŒé€ã‚‰ã‚Œã¦ããŸã€‚" },
    { id: "3", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "â€¦â€¦ãªã«ã“ã‚Œï¼Ÿâ€¦â€¦ã¯ï¼Ÿã¡ã‚‡ã£ã¨å¾…ã£ã¦ã€ã“ã‚Œâ”€â”€ãªã‚“ã§ã€ç§ã®éƒ¨å±‹ã®å†™çœŸãŒã‚ã‚‹ã®ï¼Ÿãˆã€å˜˜ã§ã—ã‚‡â€¦â€¦ï¼Ÿ" },
 { id: "3", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã“ã®ãƒªãƒ³ã‚¯ã®ä¸­ã«ã­â”€â”€ä»–ã«ã‚‚ã€ãƒŸã‚µã¡ã‚ƒã‚“ã®éƒ¨å±‹ã®å†™çœŸãŒä½•æšã‚‚å…¥ã£ã¦ã‚‹ã®ã€‚" },
         { id: "3", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â€¦â€¦ãˆï¼Ÿã¡ã‚‡ã€ã¡ã‚‡ã£ã¨å¾…ã£ã¦â€¦â€¦ã©ã†ã„ã†ã“ã¨â€¦â€¦ï¼Ÿ" },
  { id: "3", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãŸã¾ãŸã¾ã€ç§ãŒã‚¤ãƒ³ã‚¹ã‚¿ã§å†™çœŸæ¢ã—ã¦ãŸæ™‚ã«ã­ã€ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã‹ã‚‰å¤‰ãªãƒªãƒ³ã‚¯è¸ã‚“ã˜ã‚ƒã£ãŸã®ã€‚" },
 { id: "3", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãã—ãŸã‚‰ã€ãã“ã«é£›ã‚“ã§â”€â”€ãã“ã«ã¯ç›—æ’®å†™çœŸãŒãŸãã•ã‚“æ²è¼‰ã•ã‚Œã¦ã¦æœ€åˆã¯ã€ãªã‚“ã‹ã®ã‚¤ã‚¿ã‚ºãƒ©ã‹ã¨æ€ã£ãŸã‘ã©â€¦â€¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸã‚‰â€¦â€¦ãƒŸã‚µã¡ã‚ƒã‚“ã®éƒ¨å±‹ã£ã½ã„å†™çœŸãŒã‚ã£ãŸã®ã€‚" },
 
    {
        type: "choice",
        choices: [
          { text: "ã ã‹ã‚‰ã€ä¿ºã‚’ç–‘ã£ã¦ãŸã®ã‹ï¼Ÿä¿ºã˜ã‚ƒãªã„ã€‚çµ¶å¯¾ã«é•ã†ã£ã¦ã€‚", next: "4", correct: true },
          { text: "ã‚‚ã—ã‹ã—ã¦ã€ãƒŠãƒŠãƒŸã€ãŠå‰ãŒãƒ»ãƒ»ãƒ»", next: "kitchen", correct: false ,wrongMsg: "ãƒŠãƒŠãƒŸãŒç›—æ’®ã‚µã‚¤ãƒˆã«æŠ•é™ã—ãŸè¨¼æ‹ ã¯ãªã«ã‚‚ãªã„ã€‚ãƒŠãƒŠãƒŸã«å¼·ã„ä¸ä¿¡æ„Ÿã‚’ä¸ãˆãŸã€‚" }
        ]
      },
   { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãã†è¨€ã†ã¨æ€ã£ãŸã€‚ã ã‹ã‚‰ã€ã¡ã‚ƒã‚“ã¨èª¿ã¹ãŸã‚“ã ã‚ˆâ”€â”€" },
   { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "èª¿ã¹ãŸã£ã¦ã€ã©ã†ã„ã†ã“ã¨â€¦â€¦ï¼Ÿ" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãƒŸã‚µã®éƒ¨å±‹ã®å†™çœŸãŒæŠ•é™ã•ã‚Œå§‹ã‚ãŸã®ã¯ã€6æœˆ25æ—¥ã”ã‚ã€‚â”€â”€ãƒªã‚¯ãã‚“ãŒã€ãƒŸã‚µã®å®¶ã«æ¥ã‚‹æ•°æ—¥å‰ã€‚" },
          { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ã„ã‚„ã€ã ã‹ã‚‰ä¿ºã˜ã‚ƒâ”€â”€" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãƒªã‚¯ãã‚“ã˜ã‚ƒãªã„ã‚ˆã€‚æœ€åˆã¯ç–‘ã£ã¦ã”ã‚ã‚“ã­ã€‚ã§ã‚‚â€¦â€¦çŠ¯äººã€åˆ†ã‹ã£ãŸã®ã€‚" },
           { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãˆâ€¦â€¦ï¼Ÿ" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãƒŸã‚µã¡ã‚ƒã‚“ã€6æœˆ25æ—¥ã£ã¦ã€ãªã«ã‹å®¶ã«æ¥ãŸäººã„ãŸï¼Ÿ" },
   { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "â€¦â€¦ã‚ã€‚ã‚¨ã‚¢ã‚³ãƒ³ã®ç‚¹æ¤œã€‚å¤å‰ã ã‹ã‚‰ã£ã¦ã€æ¯ãŒå‘¼ã‚“ã æ¥­è€…ã•ã‚“â€¦â€¦ï¼" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãã®æ¥­è€…â”€â”€å€‹äººæ¥­è€…ã ã£ãŸã§ã—ã‚‡ï¼Ÿ" },
    { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ã†ã€ã†ã‚“ã€‚ãªã‚“ã‹ã€ç”ºå†…ä¼šã®ãƒãƒ©ã‚·ã§è¦‹ãŸã£ã¦ã€ãŠæ¯ã•ã‚“ãŒâ€¦â€¦" },
   { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãã®äººãŒã€éƒ¨å±‹ã«ä¸€äººã§å…¥ã£ãŸæ™‚é–“ã€ãªã‹ã£ãŸï¼Ÿç‚¹æ¤œã£ã¦è¨€ã£ã¦ã€10åˆ†ãã‚‰ã„ã€èª°ã‚‚ã„ãªã„éƒ¨å±‹ã«â€¦â€¦" },
    { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ã‚â€¦â€¦ã‚ã‚‹ã€‚ç§ã€ãŠèŒ¶å…¥ã‚Œã¦ã¦â€¦â€¦ãã®é–“ã«â€¦â€¦" },
   { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ãŸã¶ã‚“ãã®æ™‚ã«ã€ã‚«ãƒ¼ãƒ†ãƒ³ãƒ¬ãƒ¼ãƒ«ã‹ã€ã‚¨ã‚¢ã‚³ãƒ³è¿‘ãã«ã‚«ãƒ¡ãƒ©ã‚’è¨­ç½®ã—ãŸã‚“ã ã‚ˆã€‚â”€â”€ãƒŸã‚µã¡ã‚ƒã‚“ãŒç€æ›¿ãˆã‚‹è§’åº¦ã€å®Œç’§ã«æ˜ ã‚‹ã‚ˆã†ã«ã­ã€‚" },
            { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãã‚“ãªâ€¦â€¦ãã‚“ãªã“ã¨ã€ã‚ã‚‹ã®ã‹ã‚ˆâ€¦â€¦" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã“ã®äººã€ä»–ã«ã‚‚ã€Œè¨­ç½®ä»£è¡Œã—ã¾ã™ã€ã£ã¦æ²ç¤ºæ¿ã«æ›¸ã„ã¦ãŸã€‚è¤‡æ•°ã®å¥³ã®å­ã®éƒ¨å±‹ã®å†™çœŸã‚‚è¦‹ã¤ã‘ãŸã‚ˆã€‚ã§ã‚‚ã€ãƒŸã‚µã¡ã‚ƒã‚“ã®å†™çœŸã¯ã€æ˜ã‚‰ã‹ã«å¤šã‹ã£ãŸã€‚" },
     { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "â€¦â€¦ã˜ã‚ƒã‚ã€ç§ã€ãšã£ã¨â€¦â€¦ã‚ã®éƒ¨å±‹ã§â€¦â€¦è¦‹ã‚‰ã‚Œã¦ãŸã£ã¦ã“ã¨â€¦â€¦ï¼Ÿ" },
    { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "å¤§ä¸ˆå¤«ã€‚ã•ã£ãã€ã“ã®æƒ…å ±ã€è­¦å¯Ÿã®ã‚µã‚¤ãƒãƒ¼çŠ¯ç½ªå¯¾ç­–èª²ã«é€ã£ãŸã€‚" },
        { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãƒŠãƒŠãƒŸâ€¦â€¦ãŠå‰ã€ãã“ã¾ã§â€¦â€¦ï¼Ÿ" },
 { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã ã£ã¦â€¦â€¦å¤§äº‹ãªå‹ã ã¡ã ã‚‚ã‚“ã€‚å¤§åˆ‡ãªäººã‚’ã€ç–‘ã£ã¦ã°ã£ã‹ã‚Šã˜ã‚ƒã„ã‘ãªã„ã£ã¦ã€æ°—ã¥ã„ãŸã‹ã‚‰ã€‚" },
       { id: "4", type: "msg", name: "ãƒŸã‚µ", side: "left", icon: "mi.png", text: "ãƒŠãƒŠãƒŸâ€¦â€¦ã‚ã‚ŠãŒã¨ã†â€¦â€¦ã»ã‚“ã¨ã«â€¦â€¦ã‚ã‚ŠãŒã¨ã†â€¦â€¦" },
  { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "â€¦â€¦ã§ã‚‚ã€ã¾ã ã‚«ãƒ¡ãƒ©ãŒéƒ¨å±‹ã«æ®‹ã£ã¦ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ä»Šã‹ã‚‰ã€ä¸€ç·’ã«ç¢ºèªã—ã«è¡Œã“ã†ï¼Ÿãƒªã‚¯ãã‚“ã‚‚æ¥ã¦ãã‚Œã‚‹ã‚ˆã­ï¼Ÿ" },
    { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ï¼ˆ7æœˆ1æ—¥ãƒ»å¤œï¼‰è­¦å¯Ÿã«æƒ…å ±æä¾›ã—ãŸå¾Œã€3äººã¯ãƒŸã‚µã®éƒ¨å±‹ã«è¨­ç½®ã•ã‚Œã¦ã„ãŸå°å‹ã‚«ãƒ¡ãƒ©ã‚’ç™ºè¦‹ã€‚æ¥­è€…ã®ç”·ã¯ãã®å¾Œã€é€®æ•ã•ã‚ŒãŸã€‚äº‹ä»¶ã¯ã€è§£æ±ºã—ãŸâ”€â”€ã¯ãšã ã£ãŸã€‚" },
        { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â€¦â€¦äº‹ä»¶ãŒç‰‡ä»˜ã„ã¦ã‹ã‚‰ã€ã‚‚ã†3æ—¥ãŒçµŒã£ãŸã€‚" },
        { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãƒŠãƒŠãƒŸã¯ã„ã¤ã‚‚é€šã‚Šã ã—ã€ãƒŸã‚µã‚‚å…ƒæ°—ã‚’å–ã‚Šæˆ»ã—ã¦ã‚‹ã€‚ã§ã‚‚â”€â”€é ­ã‹ã‚‰é›¢ã‚Œãªã„ã‚“ã ã€‚" },
   { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â”€â”€ã©ã†ã—ã¦ã€ã‚ã®æ™‚ãƒŠãƒŠãƒŸã¯ã€â€œå†™çœŸã‚’è¦‹ã¦ã™ãã«â€ãƒŸã‚µã®éƒ¨å±‹ã ã£ã¦ã€åˆ†ã‹ã£ãŸã‚“ã ã‚ã†ï¼Ÿ" },
        { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ç”»åƒã¯ã€éƒ¨å±‹ã®ä¸­ã€‚ã‚«ãƒ¼ãƒ†ãƒ³ã‚‚é–‰ã¾ã£ã¦ã„ã¦ã€å ´æ‰€ã®æ‰‹ãŒã‹ã‚Šãªã‚“ã¦ã€ã»ã¨ã‚“ã©ãªã„ã€‚ãã‚Œä»¥å‰ã«ã€ãƒŠãƒŠãƒŸã¯ã€ãƒŸã‚µã®å®¶ã«è¡Œã£ãŸã“ã¨ãªã„ã¯ãšã€‚ãã‚Œãªã®ã«ã€ã€ŒãƒŸã‚µã®éƒ¨å±‹ã ã€ã£ã¦ã€ãƒŠãƒŠãƒŸã¯å³ç­”ã—ã¦ãŸã€‚æ™®é€šã€ãã‚“ãªã«åˆ†ã‹ã‚‹ã‹â€¦â€¦ï¼Ÿ" },
  { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ç¿Œæœãƒ»å­¦æ ¡" },
         { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ï¼ˆãƒŠãƒŠãƒŸã€ä»Šæ—¥ä¼‘ã¿ã‹â€¦â€¦ï¼‰" },
           { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ã‚«ãƒãƒ³ã‚’æœºã«ç½®ã„ãŸç¬é–“ã€é•å’Œæ„ŸãŒèµ°ã‚‹ã€‚" },
            { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â”€â”€ãªã«ã‹ã€é‡ã„â€¦â€¦ï¼Ÿã“ã®ãƒã‚±ãƒƒãƒˆã€ã“ã‚“ãªåšã‹ã£ãŸã£ã‘â€¦â€¦ï¼Ÿ" },
            { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ãƒãƒ£ãƒƒã‚¯ã‚’é–‹ã‘ã‚‹ã¨ã€è¦‹æ…£ã‚Œãªã„å°ã•ãªé»’ã„ãƒ‡ãƒã‚¤ã‚¹ãŒã€‚" },
                { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â€¦â€¦ãªã«ã€ã“ã‚Œã€‚" },
        { id: "4", type: "image", src: "g.jpg", caption: "è¶…å°å‹GPSç™ºä¿¡å™¨", side: "left", icon: "ri.png", name: "ãƒªã‚¯" },
         { id: "4", type: "image", src: "c.jpg", caption: "ICãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼å‹ã®éš ã—ã‚«ãƒ¡ãƒ©", side: "left", icon: "ri.png", name: "ãƒªã‚¯" },
                 { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â”€â”€ã“ã‚“ãªã‚‚ã®ã€ã‚‚ã¡ã‚ã‚“å…¥ã‚ŒãŸè¦šãˆã¯ãªã„ã€‚" },
                { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ã‚ãªãŸã¯ã€æ”¾èª²å¾Œãƒ»äººæ°—ã®ãªã„å±‹ä¸Šã«ãƒŠãƒŠãƒŸã‚’å‘¼ã³å‡ºã—ãŸã€‚" },
                    { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ãƒªã‚¯ã¯éœ‡ãˆã‚‹æ‰‹ã§ã€ãƒŠãƒŠãƒŸã«å•ã„ã‹ã‘ã‚‹ã€‚" },
                     { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãªã‚â€¦â€¦ãƒŠãƒŠãƒŸã€‚ã¡ã‚‡ã£ã¨èã„ã¦ã„ã„ï¼Ÿ" },
    { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ï¼ˆå¾®ç¬‘ã¿ãªãŒã‚‰ï¼‰ã†ã‚“ã€ãªã«ï¼Ÿ" },
   { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â”€â”€ãªã‚“ã§ã€ã‚ã®æ—¥ã€ç›—æ’®ã‚µã‚¤ãƒˆã®ç”»åƒã‚’è¦‹ã¦ã™ãã€ã€ŒãƒŸã‚µã®éƒ¨å±‹ã€ã ã£ã¦åˆ†ã‹ã£ãŸã‚“ã ï¼Ÿ" },
       { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ï¼ˆãƒŠãƒŠãƒŸã€ã´ãŸã‚Šã¨ç¬‘é¡”ã‚’æ­¢ã‚ã‚‹ï¼‰" },
         { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "â€¦â€¦â€¦â€¦ãƒªã‚¯ãã‚“ã¯ã€èª°ã®ã“ã¨ã‚’ç–‘ã£ã¦ã‚‹ã®ï¼Ÿ" },
     { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "â€¦â€¦ä¿ºã®ã‚«ãƒãƒ³ã‹ã‚‰ã€GPSã¨â€¦â€¦éš ã—ã‚«ãƒ¡ãƒ©ãŒè¦‹ã¤ã‹ã£ãŸã€‚â”€â”€ã“ã‚Œã£ã¦ã€ã©ã†ã„ã†ã“ã¨ï¼Ÿ" },
    { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "â€¦â€¦ãƒªã‚¯ãã‚“ã€å˜˜ã¤ã„ãŸã‚ˆã­ã€‚ã€Œã™ãå¸°ã£ãŸã€ã¨ã‹ã€‚" },
     { id: "4", type: "msg", name: "ãƒªã‚¯", side: "right", icon: "ri.png", text: "ãã‚Œã¯â€¦â€¦ã§ã‚‚ã€ãƒŠãƒŠãƒŸâ€¦â€¦" },
     { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã ã‹ã‚‰ã­ã€**â€œãƒªã‚¯ãã‚“ã®ã“ã¨ã€ã¡ã‚ƒã‚“ã¨è¦‹ã¦ãŸâ€**ã‚“ã ã‚ˆã€‚ã ã£ã¦ã€ç§ã®å½¼æ°ã ã‚‚ã‚“ã€‚" },
        { id: "4", type: "msg", name: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", side: "left", icon: "story.png", text: "ãƒŠãƒŠãƒŸã¯ã€é™ã‹ã«ã‚¹ãƒãƒ›ã‚’å–ã‚Šå‡ºã™ã€‚" },
      { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã ã‹ã‚‰ã­ã€**â€¦â€¦ã­ãˆã€ã“ã‚Œã€çŸ¥ã£ã¦ã‚‹ï¼Ÿã€Œãƒ•ã‚£ãƒ­ãƒãƒ‹ã‚¢ã€ã£ã¦ç—…æ°—ã€‚**ã‚“ã ã‚ˆã€‚ã ã£ã¦ã€ç§ã®å½¼æ°ã ã‚‚ã‚“ã€‚" },
       { id: "4", type: "msg", name: "ãƒŠãƒŠãƒŸ", side: "left", icon: "na.png", text: "ã ã‹ã‚‰ã­ã€**â”€â”€æ„›ãŒå¼·ã™ãã¦ã€å£Šã‚Œã¡ã‚ƒã†ç—…æ°—ã€‚ã§ã‚‚ã€ãã‚Œã£ã¦æ‚ªã„ã“ã¨ï¼Ÿå¥½ããªäººãŒã€ã©ã“ã§ã€ä½•ã—ã¦ã‚‹ã‹â€¦â€¦çŸ¥ã‚ŠãŸã„ã£ã¦ã€å½“ç„¶ã˜ã‚ƒãªã„â€¦â€¦ï¼Ÿ**ã‚“ã ã‚ˆã€‚ã ã£ã¦ã€ç§ã®å½¼æ°ã ã‚‚ã‚“ã€‚" },
       

];

    let index = 0;
    let currentBranch = null;
    let mistakeCount = 0;

    function addMessage(msg) {
      const msgEl = document.createElement("div");
      msgEl.classList.add("msg", msg.side);

      if (msg.type === "image") {
        msgEl.innerHTML = `
          <div class="icon" style="background-image: url('${msg.icon || 'shiratori.png'}')"></div>
          <div>
            <div class="name">${msg.name || "ç”»åƒ"}</div>
            <img src="${msg.src}" alt="${msg.caption || ''}" style="max-width: 100%; border-radius: 10px; margin-top: 5px; cursor: pointer;">
            ${msg.caption ? `<div style="font-size: 12px; color: #555; margin-top: 4px;">${msg.caption}</div>` : ""}
          </div>
        `;
      } else {
        msgEl.innerHTML = `
          <div class="icon" style="background-image: url('${msg.icon}')"></div>
          <div>
            <div class="name">${msg.name}</div>
            <div class="text"></div>
          </div>
        `;
      }

      // ã‚­ãƒ£ãƒ©ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§ï¼‹èª¬æ˜è¡¨ç¤º
const iconEl = msgEl.querySelector(".icon");
iconEl.style.cursor = "pointer";
iconEl.onclick = () => {
  const name = msg.name;
  if (characterInfo[name]) {
    document.getElementById("modalImg").src = characterInfo[name].img;
    document.getElementById("modalCaption").textContent = characterInfo[name].desc;
    document.getElementById("imageModal").style.display = "flex";
  } else {
    // åå‰ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    document.getElementById("modalImg").src = msg.icon;
    document.getElementById("modalCaption").textContent = "ã“ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èª¬æ˜ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚";
    document.getElementById("imageModal").style.display = "flex";
  }
};


      chat.appendChild(msgEl);

      if (msg.type === "msg") {
        const textEl = msgEl.querySelector(".text");
        let i = 0;
        const interval = setInterval(() => {
          textEl.textContent += msg.text[i];
          i++;
          if (i >= msg.text.length) clearInterval(interval);
        }, 30);
        se.currentTime = 0;
        se.play();
        chat.scrollTop = chat.scrollHeight;
      }

      if (msg.type === "image") {
        const img = msgEl.querySelector("img");
        img.onload = () => {
          chat.scrollTop = chat.scrollHeight;
        };
        img.onclick = () => {
          document.getElementById("modalImg").src = img.src;
          document.getElementById("imageModal").style.display = "flex";
        };
      }
    }
function showChoice(choices, isRestored = false) {
  nextBtn.style.display = "none";
  const choiceBox = document.createElement("div");
  choiceBox.id = "choiceBox";
  choiceBox.style.textAlign = "center";

  choices.forEach(choice => {
    const btn = document.createElement("button");
    btn.textContent = choice.text;
    btn.style.margin = "6px";
    btn.style.padding = "10px 20px";
    btn.style.borderRadius = "15px";
    btn.style.border = "none";
    btn.style.backgroundColor = "#128C7E";
    btn.style.color = "white";
    btn.style.fontSize = "16px";

    btn.classList.add("choice-glow");

    btn.setAttribute("data-correct", choice.correct);
    btn.setAttribute("data-next", choice.next);
    btn.setAttribute("data-wrongMsg", choice.wrongMsg || "");

    btn.onclick = () => {
      currentBranch = choice.next;
      const isCorrect = choice.correct;
      const wrongMsg = btn.getAttribute("data-wrongMsg");
      chat.removeChild(choiceBox);

      if (!isCorrect) {
        mistakeCount++;

        addMessage({
          type: "msg",
          name: "ã‚·ã‚¹ãƒ†ãƒ ",
          side: "left",
          icon: "warning.png",
          text: `${wrongMsg || "ãã®é¸æŠè‚¢ã¯é•ã†ã‚ˆã†ã â€¦"}ï¼ˆãƒŸã‚¹${mistakeCount}å›ç›®ï¼‰`
        });

        if (mistakeCount >= 3) {
          setTimeout(showGameOver, 1000);
        } else {
          setTimeout(() => showChoice(choices), 1000);
        }
      } else {
        nextBtn.style.display = "inline-block";
        nextStep();
      }
    };

    choiceBox.appendChild(btn);
  });

  chat.appendChild(choiceBox);
  chat.scrollTop = chat.scrollHeight;
}



    function nextStep() {
      while (index < story.length) {
        const item = story[index];
        if ((item.type === "msg" || item.type === "image") && (!item.id || item.id === currentBranch)) {
          addMessage(item);
          index++;
          break;
        }
        if (item.type === "choice") {
          showChoice(item.choices);
          index++;
          break;
        }
        index++;
      }
      if (index >= story.length) {
        nextBtn.disabled = true;
        nextBtn.innerText = "çµ‚ã‚ã‚Š";
      }
    }

    function startNew() {
      titleScreen.style.display = "none";
      gameOverScreen.style.display = "none";
      chat.style.display = "flex";
      controls.style.display = "flex";
      chat.innerHTML = "";
      index = 0;
      currentBranch = null;
      mistakeCount = 0;
      nextBtn.disabled = false;
      nextBtn.innerText = "â–¶ æ¬¡ã¸";
      nextBtn.style.display = "inline-block";
      const oldChoiceBox = document.getElementById("choiceBox");
      if (oldChoiceBox) oldChoiceBox.remove();
      nextStep();
    }

    function returnToTitle() {
      gameOverScreen.style.display = "none";
      chat.style.display = "none";
      controls.style.display = "none";
      titleScreen.style.display = "flex";
    }

    function startContinue() {
      startNew();
    }

    function showGameOver() {
      gameOverScreen.style.display = "flex";
      chat.style.display = "none";
      controls.style.display = "none";
      nextBtn.disabled = true;
    }

    function closeImageModal() {
      document.getElementById("imageModal").style.display = "none";
    }

    nextBtn.addEventListener("click", nextStep);

  // ã‚»ãƒ¼ãƒ–å‡¦ç†
 function saveGame() {
  const choiceBox = document.getElementById("choiceBox");
  let currentChoices = null;

  if (choiceBox) {
    currentChoices = Array.from(choiceBox.querySelectorAll("button")).map((btn, i) => {
      return {
        text: btn.textContent,
        correct: btn.getAttribute("data-correct") === "true",
        next: btn.getAttribute("data-next")
      };
    });
  }

  const saveData = {
    index,
    currentBranch,
    mistakeCount,
    chatHTML: chat.innerHTML,
    nextDisabled: nextBtn.disabled,
    nextText: nextBtn.innerText,
    currentChoices
  };
  localStorage.setItem("phobia_save", JSON.stringify(saveData));
  alert("ä¿å­˜ã—ã¾ã—ãŸï¼");
}

function loadGame() {
  const data = localStorage.getItem("phobia_save");
  if (!data) {
    alert("ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“");
    return;
  }

  const saveData = JSON.parse(data);
  titleScreen.style.display = "none";
  gameOverScreen.style.display = "none";
  chat.style.display = "flex";
  controls.style.display = "flex";

  index = saveData.index;
  currentBranch = saveData.currentBranch;
  mistakeCount = saveData.mistakeCount;
  chat.innerHTML = saveData.chatHTML;
  nextBtn.disabled = saveData.nextDisabled;
  nextBtn.innerText = saveData.nextText;
  nextBtn.style.display = nextBtn.disabled ? "none" : "inline-block";

  // ãƒ¢ãƒ¼ãƒ€ãƒ«å†è¨­å®š
  document.querySelectorAll("#chat img").forEach(img => {
    img.onclick = () => {
      document.getElementById("modalImg").src = img.src;
      document.getElementById("imageModal").style.display = "flex";
    };
  });

  // é¸æŠè‚¢ã‚’å¾©å…ƒ
  const oldBox = document.getElementById("choiceBox");
  if (oldBox) oldBox.remove();

  if (saveData.currentChoices) {
    showChoice(saveData.currentChoices, true); // true = å¾©å…ƒãƒ¢ãƒ¼ãƒ‰
  }
}


  // ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
  document.getElementById("saveBtn").addEventListener("click", saveGame);
  document.getElementById("loadBtn").addEventListener("click", loadGame);

    

  document.querySelectorAll("button").forEach(btn => {
    btn.addEventListener("click", function (e) {
      const circle = document.createElement("span");
      const diameter = Math.max(btn.clientWidth, btn.clientHeight);
      const rect = btn.getBoundingClientRect();
      circle.style.width = circle.style.height = `${diameter}px`;
      circle.style.left = `${e.clientX - rect.left - diameter / 2}px`;
      circle.style.top = `${e.clientY - rect.top - diameter / 2}px`;
      circle.style.position = "absolute";
      circle.style.borderRadius = "50%";
      circle.style.background = "rgba(255, 255, 255, 0.4)";
      circle.style.transform = "scale(0)";
      circle.style.animation = "ripple 0.6s linear";
      circle.style.pointerEvents = "none";
      btn.appendChild(circle);

      setTimeout(() => {
        circle.remove();
      }, 600);
    });
  });



  </script>
</body>
</html>
